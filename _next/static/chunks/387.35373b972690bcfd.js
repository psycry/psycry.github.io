"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{13387:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var o=n(95155),r=n(12115),l=n(99008),s=n(47376),a=n(41808),i=n(4317),u=n(70502),c=n(69841),p=n(91859),E=n(56444),d=n(95173),f=n(54601),m=n(35013),O=n(28599),_=n(74570),T=n(69987),h=n(60959),w=n(78910),N=n(56583),M=n(13505),y=n(61952),L=n(36882),R=n(79189),C=n(75043),A=n(53058);let g={TABLE_FORM_LAYOUT_CHANGE:"TABLE_FORM_LAYOUT_CHANGE",TABLE_FORM_FIELD_LAYOUT_CHANGE:"TABLE_FORM_FIELD_LAYOUT_CHANGE"};class v extends R.ControlInstance{recv=()=>{};child(e){}tableFormLayoutChange(e){this.sendMessage({type:g.TABLE_FORM_LAYOUT_CHANGE,payload:e})}tableFormFieldLayoutChange(e){this.sendMessage({type:g.TABLE_FORM_FIELD_LAYOUT_CHANGE,payload:e})}}var I=n(91660);function H(e){let t=new MessageChannel;return t.port1.onmessage=({data:[n,o]})=>{Promise.resolve().then(()=>e.apply(null,o)).then(e=>t.port1.postMessage([n,e]))},t.port2}function F(e){let{options:t}=e;if("function"!=typeof t)return[{...e,options:t},[]];let n=H(t);return[{...e,options:n},[n]]}function D(e){let{options:t}=e;if(!isSerializedFunction(t))return{...e,options:t};let n=deserializeFunction(t);return{...e,options:n}}let S=(0,l.HY)({documents:function(e=function({documents:e=[]}={}){return p.Cj({documents:e})}(),t){let n=p.Ff(e,t);if(t.type!==E.Q3.CHANGE_DOCUMENT)return n;{var o,r,l;let e,s=(r=n,l=t.payload.documentKey,p.YE(r,l));if(null==s)return n;let a=p.p0(s),i=(o=t.payload.operation,e=a,o.forEach(t=>{null!=t.ld&&(e=(0,c.a7)(e,t.p)),null!=t.od&&(e=(0,c.a7)(e,t.p)),null!=t.li&&(e=(0,c.Oe)(e,t.p,t.li)),null!=t.oi&&(e=(0,c.Oe)(e,t.p,t.oi))}),e);return a===i?n:new Map(n).set(t.payload.documentKey,{...s,rootElement:i})}},elementTrees:d.Ff,reactComponents:f.Ff,boxModels:m.Ff,componentsMeta:O.Ff,propControllers:_.Ff,propControllerHandles:T.Ff,isInBuilder:h.Ff,isPreview:w.Ff,builderEditMode:N.Ff,pointer:function(e={pointer:null},t){return t.type===E.Q3.BUILDER_POINTER_MOVE?{...e,pointer:t.payload.pointer}:e},elementImperativeHandles:function(e=new Map,t){switch(t.type){case E.Q3.REGISTER_COMPONENT_HANDLE:return new Map(e).set(t.payload.documentKey,new Map(new Map(e.get(t.payload.documentKey)??[])).set(t.payload.elementKey,t.payload.componentHandle));case E.Q3.UNREGISTER_COMPONENT_HANDLE:{let n=new Map(e.get(t.payload.documentKey)??[]);if(!n.delete(t.payload.elementKey))return e;return new Map(e).set(t.payload.documentKey,n)}default:return e}},breakpoints:M.Ff});function Q(e){return e.boxModels}function b(e){return e.propControllerHandles}class U{channel=null;bufferedMessages=[];postMessage(e,t){this.channel?this.channel.postMessage(e,t??[]):this.bufferedMessages.push([e,t])}setup(e){let t=new window.MessageChannel;t.port1.onmessage=e,window.parent.postMessage(t.port2,"*",[t.port2]),this.channel=t.port1}dispatchBuffered(){console.assert(null!=this.channel,"channel is not setup"),this.bufferedMessages.forEach(([e,t])=>{this.channel?.postMessage(e,t??[])}),this.bufferedMessages=[]}teardown(){this.channel&&(this.channel.onmessage=null,this.channel.close())}}var P=n(78514),G=n(64049),B=n(34012);function k(e){let{children:t}=e,n=(0,P.H)(),c=(0,B.O)(),d=(0,r.useMemo)(()=>(function({preloadedState:e,client:t}){let n={...e,isPreview:w.Cj(!0)},o=(0,a.t)({name:`Host store (${new Date().toISOString()})`,serialize:!0,stateSanitizer:e=>(0,u.s)(e),actionsDenylist:[E.Q3.BUILDER_POINTER_MOVE,E.Q3.HANDLE_POINTER_MOVE,E.Q3.ELEMENT_FROM_POINT_CHANGE]}),r=new U,c=(0,l.y$)(S,n,o((0,y.q)(()=>{(0,c.dispatch)(e=>{r.setup(t=>e(t.data))})},()=>r.teardown()),(0,l.Tw)(s.A,L.d1(),({dispatch:e})=>t=>n=>{switch(n.type){case E.Q3.REGISTER_COMPONENT_HANDLE:m.gR(n.payload.componentHandle)&&e((0,E.pq)(n.payload.documentKey,n.payload.elementKey,n.payload.componentHandle));break;case E.Q3.UNREGISTER_COMPONENT_HANDLE:e((0,E.AU)(n.payload.documentKey,n.payload.elementKey))}return t(n)},({dispatch:e})=>t=>{if("undefined"==typeof window)return()=>{};let n=()=>{};return o=>{switch(o.type){case E.Q3.CHANGE_ELEMENT_BOX_MODELS:case E.Q3.MOUNT_COMPONENT:case E.Q3.UNMOUNT_COMPONENT:case E.Q3.CHANGE_DOCUMENT_ELEMENT_SIZE:case E.Q3.MESSAGE_BUILDER_PROP_CONTROLLER:case E.Q3.HANDLE_WHEEL:case E.Q3.HANDLE_POINTER_MOVE:case E.Q3.ELEMENT_FROM_POINT_CHANGE:case E.Q3.SET_LOCALE:case E.Q3.SET_BREAKPOINTS:case E.Q3.REGISTER_BUILDER_DOCUMENT:case E.Q3.UNREGISTER_BUILDER_DOCUMENT:r.postMessage(o);break;case E.Q3.REGISTER_BUILDER_COMPONENT:{let{transferables:e,...t}=o;r.postMessage(t,e);break}case E.Q3.UNREGISTER_BUILDER_COMPONENT:r.postMessage(o);break;case E.Q3.CHANGE_DOCUMENT_ELEMENT_SCROLL_TOP:window.document.documentElement.scrollTop=o.payload.scrollTop;break;case E.Q3.SCROLL_DOCUMENT_ELEMENT:window.document.documentElement.scrollTop+=o.payload.scrollTopDelta;break;case E.Q3.SET_BUILDER_EDIT_MODE:r.postMessage(o),window.getSelection()?.removeAllRanges();break;case E.Q3.INIT:n=e((e,t)=>{let n=e((e,t)=>{var n;let o=(n=t().documents,p.HK(n));return o.forEach(t=>{e((0,E.mh)(t))}),()=>{o.forEach((t,n)=>{e((0,E.pL)(n))})}}),o=e(e=>{let t=requestAnimationFrame(function n(){e((e,t)=>{var n,o;let r=(n=t(),m.D(Q(n))),l=(o=t(),m.sE(Q(o))),s=new Map;r.forEach((e,t)=>{let n=new Map;e.forEach((e,t)=>{let o=m.xP(e);null!=o&&n.set(t,o)}),n.size>0&&s.set(t,n)});let a=new Map;l.forEach((e,t)=>{let n=new Map;e.forEach((e,o)=>{s.get(t)?.has(o)||n.set(o,null),n.size>0&&a.set(t,n)})}),s.forEach((e,n)=>{let o=new Map;e.forEach((e,r)=>{var l;let s=(l=t(),m.rf(Q(l),n,r));null!=s&&(0,i.A)(s,e)||o.set(r,e)}),o.size>0&&a.set(n,o)}),a.size>0&&e((0,E.e$)(a))}),t=requestAnimationFrame(n)});return()=>{cancelAnimationFrame(t)}}),l=e(e=>{let t,n=requestAnimationFrame(function o(){var r;let l={offsetWidth:(r=window.document.documentElement).offsetWidth,offsetHeight:r.offsetHeight,clientWidth:r.clientWidth,clientHeight:r.clientHeight,scrollWidth:r.scrollWidth,scrollHeight:r.scrollHeight,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft};(0,i.A)(t,l)||(t=l,e((0,E.d_)(l))),n=requestAnimationFrame(o)});return()=>{cancelAnimationFrame(n)}}),s=e((e,t)=>{return window.addEventListener("focusin",n),window.addEventListener("focusout",o),()=>{window.removeEventListener("focusin",n),window.removeEventListener("focusout",o)};function n(e){L.Ze(t())!==N.vG.INTERACT&&(e.target instanceof window.HTMLElement&&e.target.isContentEditable||window.parent.focus())}function o(e){L.Ze(t())!==N.vG.INTERACT&&(e.relatedTarget instanceof window.HTMLElement&&e.relatedTarget.isContentEditable||window.parent.focus())}}),a=e(e=>{let t=window.document.documentElement.style.overflow;return window.document.documentElement.style.overflow="hidden",window.document.documentElement.addEventListener("wheel",n),()=>{window.document.documentElement.style.overflow=t,window.document.documentElement.removeEventListener("wheel",n)};function n({deltaX:t,deltaY:n}){e((0,E.QQ)({deltaX:t,deltaY:n}))}}),u=e(e=>{return window.document.documentElement.addEventListener("pointermove",t),()=>{window.document.documentElement.removeEventListener("pointermove",t)};function t({clientX:t,clientY:n}){e((0,E.Td)({clientX:t,clientY:n}))}}),c=e((e,t)=>{let n=null,o=requestAnimationFrame(function r(){let l=t().pointer.pointer,s=null==l?null:document.elementFromPoint(l.x,l.y);if(s!==n){n=s;let t=e((e,t)=>{if(null==s)return null;let n=function(e,t){let n=e.elementImperativeHandles,o=new Map;for(let[e,r]of n){let n=new Map;for(let[e,o]of r){let r=o.getDomNode();r?.contains(t)&&n.set(e,o)}n.size>0&&o.set(e,n)}return o}(t(),s),o=L.pN(t()).slice().reverse(),r=s;for(;null!=r;){for(let e of o){let t=n.get(e);if(null!=t){for(let[n,o]of t)if(o.getDomNode()===r)return{documentKey:e,elementKey:n}}}r=r.parentElement}return null});e((0,E.DS)(t))}o=requestAnimationFrame(r)});return()=>{cancelAnimationFrame(o)}}),d=e((e,t)=>{var n;let o=t(),r=(n=o,O.YC(n.componentsMeta));return r.forEach((t,n)=>{var r,l;let s=(r=o,l=n,_.$u(r.propControllers,l));if(null!=s){let[o,r]=Object.entries(s).reduce(([e,t],[n,o])=>{let[r,l]=function e(t){if((0,C.T)(t))return function(t){switch(t.type){case A.Or.Checkbox:let{options:n}=t;if("function"!=typeof n)return[{...t,options:n},[]];let o=H(n);return[{...t,options:o},[o]];case I.J.List:let{type:r,getItemLabel:l}=t.options,s=[],[a,i]=e(r),u=l&&H(l);return s.push(...i),null!=u&&s.push(u),[{...t,options:{...t.options,type:a,getItemLabel:u}},s];case I.J.Shape:let{type:c}=t.options,p=[],E={};return Object.entries(c).forEach(([t,n])=>{let[o,r]=e(n);E[t]=o,p.push(...r)}),[{...t,options:{...t.options,type:E}},p];case I.J.Typeahead:let{getItems:d}=t.options,f=d&&H(d);return[{...t,options:{...t.options,getItems:f}},null==f?[]:[f]];case A.Or.GapX:return F(t);case A.Or.GapY:let{options:m}=t;if("function"!=typeof m)return[{...t,options:m},[]];let O=H(m);return[{...t,options:O},[O]];case A.Or.ResponsiveColor:let{options:_}=t;if("function"!=typeof _)return[{...t,options:_},[]];let T=H(_);return[{...t,options:T},[T]];case A.Or.ResponsiveNumber:return F(t);case A.Or.Number:let{options:h}=t;if("function"!=typeof h)return[{...t,options:h},[]];let w=H(h);return[{...t,options:w},[w]];case A.Or.ResponsiveIconRadioGroup:case A.Or.ResponsiveSelect:return F(t);case A.Or.ResponsiveLength:let{options:N}=t;if("function"!=typeof N)return[{...t,options:N},[]];let M=H(N);return[{...t,options:M},[M]];case A.Or.Date:let{options:y}=t;if("function"!=typeof y)return[{...t,options:y},[]];let L=H(y);return[{...t,options:L},[L]];case A.Or.Link:let{options:R}=t;if("function"!=typeof R)return[{...t,options:R},[]];let C=H(R);return[{...t,options:C},[C]];case A.Or.TextInput:let{options:g}=t;if("function"!=typeof g)return[{...t,options:g},[]];let v=H(g);return[{...t,options:v},[v]];case A.Or.TextStyle:let{options:D}=t;if("function"!=typeof D)return[{...t,options:D},[]];let S=H(D);return[{...t,options:S},[S]];case A.Or.Image:let{options:Q}=t;if("function"!=typeof Q)return[{...t,options:Q},[]];let b=H(Q);return[{...t,options:b},[b]];case I.J.RichText:let{options:U}=t;if("function"!=typeof U)return[{...t,options:U},[]];let P=H(U);return[{...t,options:P},[P]];default:return[t,[]]}}(t);let[n,o]=t.serialize();return[n,o]}(o);return[{...e,[n]:r},[...t,...l]]},[{},[]]);e((0,E.qH)({type:n,meta:t,serializedControls:o},r))}}),()=>{r.forEach((t,n)=>{e((0,E.$f)({type:n}))})}}),f=L.BQ(t());return e((0,E.LT)(f)),e((0,E.vI)(!0)),r.dispatchBuffered(),()=>{n(),o(),l(),s(),a(),u(),c(),d(),e((0,E.vI)(!1))}});break;case E.Q3.CLEAN_UP:n()}return t(o)}},({dispatch:e,getState:t})=>n=>o=>{switch(o.type){case E.Q3.REGISTER_COMPONENT_HANDLE:{let{documentKey:n,elementKey:r,componentHandle:l}=o.payload,s=L.V6(t(),n,r),a=e((e,t)=>{let o=L.Ue(t(),n,r);if(null==o)return null;let l=Object.entries(o).reduce((t,[o,l])=>{var s;let a=(s=t=>e((0,E.M_)(n,r,o,t)),(0,C.T)(l)?l.type===A.Or.TableFormFields?new v(s):new R.DefaultControlInstance(s):l.createInstance(s));return{...t,[o]:a}},{});return e((0,E.SV)(n,r,l)),l});null!=s&&!R.isElementReference(s)&&T.hf(l)&&(e((0,E.iA)(n,r,l)),l.setPropControllers(a));break}case E.Q3.UNREGISTER_COMPONENT_HANDLE:{let{documentKey:n,elementKey:r}=o.payload,l=T.pq(b(t()),n,r);l?.setPropControllers(null),e((0,E.hL)(n,r));break}case E.Q3.MESSAGE_HOST_PROP_CONTROLLER:{let e=T.US(b(t()),o.payload.documentKey,o.payload.elementKey,o.payload.propName);e&&e.recv(o.payload.message)}}return n(o)},()=>e=>n=>(t.makeswiftApiClient.dispatch(n),e(n)))));return c})({preloadedState:n.store.getState(),client:c}),[c,n]);return(0,r.useEffect)(()=>(d.setup(),()=>d.teardown()),[d]),(0,o.jsx)(G.StoreContext.Provider,{value:d,children:t})}}}]);